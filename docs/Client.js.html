<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Client.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Tutorials</li><li class="nav-item"><a href="tutorial-creatingEvents.html">creatingEvents</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="BasePiece.html">BasePiece</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="BasePiece.html#init">init</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="BasePiece.html#reload">reload</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="BasePiece.html#run">run</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Command.html">Command</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Command.html#init">init</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Command.html#reload">reload</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Command.html#run">run</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="CommandManager.html">CommandManager</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="CommandManager.html#init">init</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="CommandManager.html#load">load</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Event.html">Event</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Event.html#init">init</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Event.html#reload">reload</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Event.html#run">run</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="EventManager.html">EventManager</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="EventManager.html#init">init</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="EventManager.html#load">load</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Monitor.html">Monitor</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Monitor.html#init">init</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Monitor.html#reload">reload</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Monitor.html#run">run</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="MonitorManager.html">MonitorManager</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="MonitorManager.html#init">init</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="MonitorManager.html#load">load</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="MoonlightBaseManager.html">MoonlightBaseManager</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="MoonlightBaseManager.html#init">init</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="MoonlightBaseManager.html#load">load</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="MoonlightClient.html">MoonlightClient</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="MoonlightClient.html#login">login</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Stopwatch.html">Stopwatch</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Stopwatch.html#reset">reset</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Stopwatch.html#stop">stop</a></span></li><li class="nav-heading">Externals</li><li class="nav-heading"><span class="nav-item-type type-external">E</span><span class="nav-item-name"><a href="external-Client.html">Client</a></span></li><li class="nav-heading"><span class="nav-item-type type-external">E</span><span class="nav-item-name"><a href="external-ClientOptions.html">ClientOptions</a></span></li><li class="nav-heading"><a href="global.html">Globals</a></li>
</nav>

<div id="main">
    
    <h1 class="page-title">Client.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>"use strict";
var __importDefault = (this &amp;&amp; this.__importDefault) || function (mod) {
    return (mod &amp;&amp; mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const discord_js_1 = require("discord.js");
const path_1 = __importDefault(require("path"));
const CommandManager_1 = __importDefault(require("./structures/Managers/CommandManager"));
const EventManager_1 = __importDefault(require("./structures/Managers/EventManager"));
const MonitorManagers_1 = __importDefault(require("./structures/Managers/MonitorManagers"));
const util_1 = require("./util");
/**
 * @external ClientOptions
 * @see {@link https://discord.js.org/#/docs/main/stable/typedef/ClientOptions}
 */
/**
 * @typedef {external:ClientOptions} MoonlightClientOptions
 * @property {string|string[]} [prefix] The prefix or an array of prefixes the bot will use
 * @property {boolean} [displayErrors=true] Whether or not to display error messages send as the error event
 * @property {function} [readyMessage] Set the ready message to display when thgge bot is ready -> should return a string
 * @example { ..., prefix: ['p.', 'p!'], displayErrors: false, readyMessage: (client) => `Logged in as ${client.user.tag}` }
 */
/**
 * @external Client
 * @see {@link https://discord.js.org/#/docs/main/stable/class/Client}
 */
/**
 * @typedef Map
 * @see {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map}
 */
/**
 * The Moonlight Client
 * @license MIT
 * @extends external:Client
 * @property {string} mainDir The user's directory
 * @property {string} coreDir The core directory, where the Moonlight files are located
 * @property {CommandManager} commands The command manager that stores all command
 * @property {Map} aliases A map which stores all command aliases
 * @property {MonitorManager} monitors The monitor manager that stores all monitors
 * @property {EventManager} events The event manager that stores all events
 * @property {string[]} prefixes An array containing all the prefixes
 */
class MoonlightClient extends discord_js_1.Client {
    /**
     * @param {MoonlightClientOptions} options The Moonlight Client Options
     * @example { prefix: ['p.', 'p!'], displayErrors: false, readyMessage: (client) => `Logged in as ${client.user.tag}` }
     */
    constructor(options) {
        var _a;
        super(options);
        this.mainDir = path_1.default.dirname(require.main.filename);
        this.coreDir = path_1.default.join(__dirname, '../');
        this.commands = new CommandManager_1.default(this);
        this.aliases = new Map();
        this.events = new EventManager_1.default(this);
        this.monitors = new MonitorManagers_1.default(this);
        this.prefixes = new Array();
        if ((_a = this.options) === null || _a === void 0 ? void 0 : _a.prefix) {
            if (Array.isArray(this.options.prefix)) {
                this.prefixes.push(...this.options.prefix);
            }
            else
                this.prefixes.push(this.options.prefix);
        }
        if ((options === null || options === void 0 ? void 0 : options.displayErrors) || !(options === null || options === void 0 ? void 0 : options.displayErrors)) {
            this.on('error', error => console.error(`[Error] ${error}`));
        }
    }
    /**
     * Returns a Map containing every Moonlight manager
     * @returns {Map}
     */
    get managers() {
        return new Map([...this.commands, ...this.events, ...this.monitors]);
    }
    /**
     * The function that initiates the bot and then logs the client in, establishing a websocket connection to Discord.
     * @param {string} token Token of the bot account to log in with
     * @returns {Promise&lt;string>} Token
     * @example(client.login('token'))
     */
    async login(token) {
        const stopwatch = new util_1.Stopwatch();
        await Promise.all([
            this.events.init(),
            this.commands.init(),
            this.monitors.init()
        ]);
        stopwatch.stop();
        console.info(`Loaded everything in: ${stopwatch.getElapsedHuman}`);
        this.events.forEach(event => {
            if (event.disabled)
                return;
            if (event.once)
                return this.once(event.event, (...arg) => event.run(...arg));
            this.on(event.event, (...arg) => event.run(...arg));
        });
        return super.login(token);
    }
}
exports.default = MoonlightClient;
;
//# sourceMappingURL=Client.js.map</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.4</a> on Mon May 11 2020 19:57:49 GMT+0300 (Eastern European Summer Time) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
